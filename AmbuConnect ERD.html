<svg viewBox="0 0 1600 1800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .entity-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .entity-title { fill: #1976d2; font-weight: bold; font-size: 14px; font-family: Arial, sans-serif; }
      .entity-attr { fill: #333; font-size: 11px; font-family: Arial, sans-serif; }
      .relationship-line { stroke: #666; stroke-width: 2; fill: none; }
      .relationship-text { fill: #666; font-size: 10px; font-family: Arial, sans-serif; font-style: italic; }
    </style>
    <marker id="crow-many" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
    <marker id="crow-one" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto">
      <line x1="0" y1="0" x2="0" y2="6" stroke="#666" stroke-width="2"/>
    </marker>
  </defs>

  <!-- USERS Entity -->
  <g id="users">
    <rect x="30" y="30" width="220" height="170" class="entity-box"/>
    <text x="140" y="50" text-anchor="middle" class="entity-title">USERS</text>
    <text x="40" y="70" class="entity-attr">bigint id (PK)</text>
    <text x="40" y="88" class="entity-attr">string name</text>
    <text x="40" y="106" class="entity-attr">string email</text>
    <text x="40" y="124" class="entity-attr">string password</text>
    <text x="40" y="142" class="entity-attr">string phone</text>
    <text x="40" y="160" class="entity-attr">datetime created_at</text>
    <text x="40" y="178" class="entity-attr">datetime updated_at</text>
  </g>

  <!-- ROLES Entity -->
  <g id="roles">
    <rect x="320" y="30" width="220" height="100" class="entity-box"/>
    <text x="430" y="50" text-anchor="middle" class="entity-title">ROLES</text>
    <text x="330" y="70" class="entity-attr">int id (PK)</text>
    <text x="330" y="88" class="entity-attr">string name</text>
    <text x="330" y="106" class="entity-attr">(admin, driver, user)</text>
  </g>

  <!-- USER_ROLES Entity -->
  <g id="user-roles">
    <rect x="320" y="180" width="220" height="90" class="entity-box"/>
    <text x="430" y="200" text-anchor="middle" class="entity-title">USER_ROLES</text>
    <text x="330" y="220" class="entity-attr">bigint user_id (FK, unique)</text>
    <text x="330" y="238" class="entity-attr">int role_id (FK)</text>
    <text x="330" y="256" class="entity-attr">datetime assigned_at</text>
  </g>

  <!-- DRIVER_PROFILES Entity -->
  <g id="driver-profiles">
    <rect x="30" y="270" width="220" height="130" class="entity-box"/>
    <text x="140" y="290" text-anchor="middle" class="entity-title">DRIVER_PROFILES</text>
    <text x="40" y="310" class="entity-attr">bigint id (PK)</text>
    <text x="40" y="328" class="entity-attr">bigint user_id (FK, unique)</text>
    <text x="40" y="346" class="entity-attr">string license_number</text>
    <text x="40" y="364" class="entity-attr">string cnic</text>
    <text x="40" y="382" class="entity-attr">datetime created_at, updated_at</text>
  </g>

  <!-- AMBULANCE_TYPES Entity -->
  <g id="ambulance-types">
    <rect x="600" y="270" width="220" height="100" class="entity-box"/>
    <text x="710" y="290" text-anchor="middle" class="entity-title">AMBULANCE_TYPES</text>
    <text x="610" y="310" class="entity-attr">int id (PK)</text>
    <text x="610" y="328" class="entity-attr">string type (BLS, ALS, ICU)</text>
    <text x="610" y="346" class="entity-attr">datetime created_at</text>
  </g>

  <!-- AMBULANCES Entity -->
  <g id="ambulances">
    <rect x="320" y="330" width="240" height="150" class="entity-box"/>
    <text x="440" y="350" text-anchor="middle" class="entity-title">AMBULANCES</text>
    <text x="330" y="370" class="entity-attr">bigint id (PK)</text>
    <text x="330" y="388" class="entity-attr">bigint driver_profile_id (FK)</text>
    <text x="330" y="406" class="entity-attr">int ambulance_type_id (FK)</text>
    <text x="330" y="424" class="entity-attr">string vehicle_number (unique)</text>
    <text x="330" y="442" class="entity-attr">string model</text>
    <text x="330" y="460" class="entity-attr">datetime created_at, updated_at</text>
  </g>

  <!-- AMBULANCE_AVAILABILITY Entity -->
  <g id="ambulance-availability">
    <rect x="600" y="420" width="240" height="100" class="entity-box"/>
    <text x="720" y="440" text-anchor="middle" class="entity-title">AMBULANCE_AVAILABILITY</text>
    <text x="610" y="460" class="entity-attr">bigint id (PK)</text>
    <text x="610" y="478" class="entity-attr">bigint ambulance_id (FK)</text>
    <text x="610" y="496" class="entity-attr">boolean is_available</text>
    <text x="610" y="514" class="entity-attr">datetime updated_at</text>
  </g>

  <!-- BOOKING_REQUESTS Entity -->
  <g id="booking-requests">
    <rect x="30" y="570" width="260" height="190" class="entity-box"/>
    <text x="160" y="590" text-anchor="middle" class="entity-title">BOOKING_REQUESTS</text>
    <text x="40" y="610" class="entity-attr">bigint id (PK)</text>
    <text x="40" y="628" class="entity-attr">bigint user_id (FK)</text>
    <text x="40" y="646" class="entity-attr">bigint driver_profile_id (FK, nullable)</text>
    <text x="40" y="664" class="entity-attr">bigint pickup_location_id (FK)</text>
    <text x="40" y="682" class="entity-attr">bigint drop_location_id (FK)</text>
    <text x="40" y="700" class="entity-attr">string status</text>
    <text x="40" y="718" class="entity-attr">(pending, accepted, rejected, cancelled)</text>
    <text x="40" y="736" class="entity-attr">datetime requested_at</text>
    <text x="40" y="754" class="entity-attr">datetime updated_at</text>
  </g>

  <!-- LOCATIONS Entity -->
  <g id="locations">
    <rect x="30" y="850" width="220" height="110" class="entity-box"/>
    <text x="140" y="870" text-anchor="middle" class="entity-title">LOCATIONS</text>
    <text x="40" y="890" class="entity-attr">bigint id (PK)</text>
    <text x="40" y="908" class="entity-attr">string address</text>
    <text x="40" y="926" class="entity-attr">double latitude</text>
    <text x="40" y="944" class="entity-attr">double longitude</text>
    <text x="40" y="962" class="entity-attr">datetime created_at</text>
  </g>

  <!-- TRIPS Entity -->
  <g id="trips">
    <rect x="380" y="640" width="260" height="170" class="entity-box"/>
    <text x="510" y="660" text-anchor="middle" class="entity-title">TRIPS</text>
    <text x="390" y="680" class="entity-attr">bigint id (PK)</text>
    <text x="390" y="698" class="entity-attr">bigint booking_request_id (FK, unique)</text>
    <text x="390" y="716" class="entity-attr">bigint ambulance_id (FK)</text>
    <text x="390" y="734" class="entity-attr">datetime start_time</text>
    <text x="390" y="752" class="entity-attr">datetime end_time (nullable)</text>
    <text x="390" y="770" class="entity-attr">decimal fare</text>
    <text x="390" y="788" class="entity-attr">string status (in_progress, completed, cancelled)</text>
    <text x="390" y="806" class="entity-attr">datetime created_at, updated_at</text>
  </g>

  <!-- TRIP_STATUS_HISTORY Entity -->
  <g id="trip-status">
    <rect x="720" y="580" width="240" height="100" class="entity-box"/>
    <text x="840" y="600" text-anchor="middle" class="entity-title">TRIP_STATUS_HISTORY</text>
    <text x="730" y="620" class="entity-attr">bigint id (PK)</text>
    <text x="730" y="638" class="entity-attr">bigint trip_id (FK)</text>
    <text x="730" y="656" class="entity-attr">string status</text>
    <text x="730" y="674" class="entity-attr">datetime changed_at</text>
  </g>

  <!-- PAYMENTS Entity -->
  <g id="payments">
    <rect x="720" y="740" width="260" height="160" class="entity-box"/>
    <text x="850" y="760" text-anchor="middle" class="entity-title">PAYMENTS</text>
    <text x="730" y="780" class="entity-attr">bigint id (PK)</text>
    <text x="730" y="798" class="entity-attr">bigint trip_id (FK, unique)</text>
    <text x="730" y="816" class="entity-attr">string method (cash, card, online)</text>
    <text x="730" y="834" class="entity-attr">decimal amount</text>
    <text x="730" y="852" class="entity-attr">string status (pending, completed, failed)</text>
    <text x="730" y="870" class="entity-attr">string transaction_id (nullable)</text>
    <text x="730" y="888" class="entity-attr">datetime paid_at, created_at</text>
  </g>

  <!-- TRIP_LOCATION_TRACKING Entity -->
  <g id="trip-location">
    <rect x="720" y="960" width="240" height="110" class="entity-box"/>
    <text x="840" y="980" text-anchor="middle" class="entity-title">TRIP_LOCATION_TRACKING</text>
    <text x="730" y="1000" class="entity-attr">bigint id (PK)</text>
    <text x="730" y="1018" class="entity-attr">bigint trip_id (FK)</text>
    <text x="730" y="1036" class="entity-attr">double latitude, longitude</text>
    <text x="730" y="1054" class="entity-attr">datetime recorded_at</text>
  </g>

  <!-- Relationships -->
  
  <!-- USERS to USER_ROLES -->
  <path d="M 250 115 L 320 225" class="relationship-line" marker-end="url(#crow-one)"/>
  <circle cx="250" cy="115" r="3" fill="#666"/>
  <line x1="250" y1="112" x2="250" y2="118" stroke="#666" stroke-width="2"/>
  <text x="270" y="160" class="relationship-text">has (1:1)</text>

  <!-- ROLES to USER_ROLES -->
  <path d="M 430 130 L 430 180" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="430" cy="130" r="3" fill="#666"/>
  <line x1="427" y1="130" x2="433" y2="130" stroke="#666" stroke-width="2"/>

  <!-- USERS to DRIVER_PROFILES -->
  <path d="M 140 200 L 140 270" class="relationship-line" marker-end="url(#crow-one)"/>
  <circle cx="140" cy="200" r="3" fill="#666"/>
  <line x1="137" y1="200" x2="143" y2="200" stroke="#666" stroke-width="2"/>
  <line x1="140" y1="267" x2="140" y2="273" stroke="#666" stroke-width="2"/>

  <!-- USERS to BOOKING_REQUESTS -->
  <path d="M 90 200 L 90 570" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="90" cy="200" r="3" fill="#666"/>
  <line x1="87" y1="200" x2="93" y2="200" stroke="#666" stroke-width="2"/>
  <text x="100" y="380" class="relationship-text">requests</text>

  <!-- DRIVER_PROFILES to AMBULANCES -->
  <path d="M 250 335 L 320 405" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="250" cy="335" r="3" fill="#666"/>
  <line x1="247" y1="335" x2="253" y2="335" stroke="#666" stroke-width="2"/>
  <text x="270" y="365" class="relationship-text">manages</text>

  <!-- DRIVER_PROFILES to BOOKING_REQUESTS -->
  <path d="M 140 400 L 140 570" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="140" cy="400" r="3" fill="#666"/>
  <line x1="137" y1="400" x2="143" y2="400" stroke="#666" stroke-width="2"/>
  <text x="150" y="480" class="relationship-text">assigned</text>

  <!-- AMBULANCE_TYPES to AMBULANCES -->
  <path d="M 600 320 L 560 390" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="600" cy="320" r="3" fill="#666"/>
  <line x1="597" y1="320" x2="603" y2="320" stroke="#666" stroke-width="2"/>
  <text x="565" y="350" class="relationship-text">categorized</text>

  <!-- AMBULANCES to AMBULANCE_AVAILABILITY -->
  <path d="M 560 450 L 600 470" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="560" cy="450" r="3" fill="#666"/>
  <line x1="557" y1="450" x2="563" y2="450" stroke="#666" stroke-width="2"/>

  <!-- AMBULANCES to TRIPS -->
  <path d="M 470 480 L 470 640" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="470" cy="480" r="3" fill="#666"/>
  <line x1="467" y1="480" x2="473" y2="480" stroke="#666" stroke-width="2"/>
  <text x="480" y="560" class="relationship-text">used_in</text>

  <!-- LOCATIONS to BOOKING_REQUESTS -->
  <path d="M 140 850 L 140 760" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="140" cy="850" r="3" fill="#666"/>
  <line x1="137" y1="850" x2="143" y2="850" stroke="#666" stroke-width="2"/>
  <text x="150" y="800" class="relationship-text">pickup/drop</text>

  <!-- BOOKING_REQUESTS to TRIPS -->
  <path d="M 290 660 L 380 720" class="relationship-line" marker-end="url(#crow-one)"/>
  <circle cx="290" cy="660" r="3" fill="#666"/>
  <line x1="287" y1="660" x2="293" y2="660" stroke="#666" stroke-width="2"/>
  <line x1="380" y1="717" x2="380" y2="723" stroke="#666" stroke-width="2"/>
  <text x="310" y="685" class="relationship-text">converts_to</text>

  <!-- TRIPS to TRIP_STATUS_HISTORY -->
  <path d="M 640 690 L 720 630" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="640" cy="690" r="3" fill="#666"/>
  <line x1="637" y1="690" x2="643" y2="690" stroke="#666" stroke-width="2"/>
  <text x="660" y="655" class="relationship-text">tracks</text>

  <!-- TRIPS to PAYMENTS -->
  <path d="M 640 760 L 720 800" class="relationship-line" marker-end="url(#crow-one)"/>
  <circle cx="640" cy="760" r="3" fill="#666"/>
  <line x1="637" y1="760" x2="643" y2="760" stroke="#666" stroke-width="2"/>
  <line x1="720" y1="797" x2="720" y2="803" stroke="#666" stroke-width="2"/>
  <text x="660" y="775" class="relationship-text">generates</text>

  <!-- TRIPS to TRIP_LOCATION_TRACKING -->
  <path d="M 580 810 L 750 960" class="relationship-line" marker-end="url(#crow-many)"/>
  <circle cx="580" cy="810" r="3" fill="#666"/>
  <line x1="577" y1="810" x2="583" y2="810" stroke="#666" stroke-width="2"/>
  <text x="640" y="880" class="relationship-text">logs</text>

  <!-- Legend -->
  <g id="legend">
    <text x="1100" y="50" class="entity-title">Legend</text>
    <circle cx="1100" cy="70" r="3" fill="#666"/>
    <line x1="1097" y1="70" x2="1103" y2="70" stroke="#666" stroke-width="2"/>
    <text x="1110" y="75" class="entity-attr">One (1)</text>
    <line x1="1100" y1="90" x2="1140" y2="90" class="relationship-line" marker-end="url(#crow-many)"/>
    <circle cx="1100" cy="90" r="3" fill="#666"/>
    <line x1="1097" y1="90" x2="1103" y2="90" stroke="#666" stroke-width="2"/>
    <text x="1150" y="95" class="entity-attr">Many (*)</text>
  </g>
</svg>